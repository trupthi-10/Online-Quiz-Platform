
{% extends "base.html" %}
{% block content %}
<div class="quiz-card">
  <div class="quiz-header">
    <h2>Question {{ current }} of {{ total }}</h2>
    <div class="timer">
      <span id="timer">60</span>s
    </div>
  </div>

  <form method="POST" id="quizForm" class="quiz-form">
    <input type="hidden" name="qid" value="{{ q['id'] }}"/>
    <div class="question">{{ q['text'] }}</div>
    <label class="option"><input type="radio" name="answer" value="A"> A. {{ q['option_a'] }}</label>
    <label class="option"><input type="radio" name="answer" value="B"> B. {{ q['option_b'] }}</label>
    <label class="option"><input type="radio" name="answer" value="C"> C. {{ q['option_c'] }}</label>
    <label class="option"><input type="radio" name="answer" value="D"> D. {{ q['option_d'] }}</label>

    <div class="actions">
      <button type="submit" class="btn primary">Submit & Next</button>
    </div>
  </form>
</div>

<script>
  // 60-second per-question timer with auto-submit
  let timeLeft = 60;
  const timerEl = document.getElementById('timer');
  const form = document.getElementById('quizForm');

  const tick = () => {
    timeLeft -= 1;
    if (timeLeft < 0) {
      // times up -> submit without selection
      form.submit();
      return;
    }
    timerEl.textContent = timeLeft;
  };
  timerEl.textContent = timeLeft;

  setInterval(tick, 1000);
</script>
{% endblock %}
